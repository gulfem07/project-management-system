<p>Görev eklemek için lütfen gerekli yerleri doldurunuz.</p>

<div class="col-xs-8 col-xs-offset-2 form-container">
  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="form-group">
    <div formGroupName="project" class="form-project-group">
      <div
        class="form-group"
        [ngClass]="{
          'has-error':
            form.get('project.name')?.invalid &&
            form.get('project.name')?.touched
        }"
      >
        <label for="name"> Görev İsmi * </label>
        <input
          type="text"
          id="name"
          class="form-control"
          formControlName="name"
        />
        <p
          class="error-message"
          *ngIf="
            form.get('project.name')?.invalid &&
            form.get('project.name')?.touched
          "
        >
          Lütfen bir isim giriniz!
        </p>
      </div>
      <div
        class="form-group"
        [ngClass]="{
          'has-error':
            form.get('project.assignee')?.invalid &&
            form.get('project.assignee')?.touched
        }"
      >
        <label for="assignee"> Atanacak Kişi * </label>
        <input
          type="text"
          id="assignee"
          class="form-control"
          formControlName="assignee"
        />
        <p
          class="error-message"
          *ngIf="
            form.get('project.assignee')?.invalid &&
            form.get('project.assignee')?.touched
          "
        >
          Lütfen bir isim giriniz!
        </p>
      </div>
      <label for="project"> Proje İsmi *</label>
      <mat-form-field appearance="outline">
        <mat-select formControlName="projectName" required>
          <mat-option>--</mat-option>
          <mat-option *ngFor="let project of projectList" [value]="project.id">
            {{ project.name }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="form.get('project.projectName')?.hasError('required')"
          >Lütfen bir proje seçiniz!</mat-error
        >
      </mat-form-field>
      <div
        class="form-group"
        [ngClass]="{
          'has-error':
            form.get('project.desc')?.invalid &&
            form.get('project.desc')?.touched
        }"
      >
        <label for="desc">Tanımı</label>
        <input
          type="text"
          id="desc"
          class="form-control"
          formControlName="desc"
        />
        <p
          class="error-message"
          *ngIf="
            form.get('project.desc')?.invalid &&
            form.get('project.desc')?.touched
          "
        >
          Lütfen iş tanımını yapınız!
        </p>
      </div>
      <div
        class="form-group"
        [ngClass]="{
          'has-error':
            form.get('project.dueDate')?.invalid &&
            form.get('project.dueDate')?.touched
        }"
      >
        <label for="dueDate">Son Tarih *</label>
        <input
          type="date"
          id="dueDate"
          class="form-control"
          formControlName="dueDate"
        />
        <p
          class="error-message"
          *ngIf="
            form.get('project.dueDate')?.invalid &&
            form.get('project.dueDate')?.touched
          "
        >
          Lütfen bir tarih giriniz!
        </p>
      </div>
      <label for="status"> Görevin Durumu *</label>
      <mat-form-field appearance="outline">
        <mat-select formControlName="status" required>
          <mat-option>--</mat-option>
          <mat-option *ngFor="let status of status" [value]="status.type">
            {{ status.text }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="form.get('project.status')?.hasError('required')"
          >Lütfen bir durum seçiniz!</mat-error
        >
      </mat-form-field>
    </div>
    <div>
      <button
        mat-flat-button
        class="button-color"
        type="submit"
        [disabled]="form.invalid"
      >
        Kaydet
      </button>
    </div>
  </form>
</div>
